// trace_service.bt
// è¿½è¹¤ service.inputStruct(cc CC) string â€” hello_word.go:22
// CC struct { index int; name string }
// Go x86_64 register ABI å‚³éé †åº:
//   ax = cc.index (int)
//   bx = cc.name pointer
//   cx = cc.name length

uprobe:../myserver:"bprf_demo/service.inputStruct"
{
    $index = reg("ax");
    $ptr = reg("bx");
    $len = reg("cx");
    printf("ğŸ‘‰ [inputStruct] è¢«å‘¼å«äº†ï¼ cc.index=%d, cc.name=\"%s\" (len=%d)\n",
        $index, str($ptr, $len), $len);
}

uretprobe:../myserver:"bprf_demo/service.inputStruct"
{
    printf("ğŸ¯ [inputStruct] å›å‚³äº†ï¼\n");
}

BEGIN
{
    printf("ğŸš€ é–‹å§‹è¿½è¹¤ service.inputStruct... æŒ‰ Ctrl+C çµæŸã€‚\n");
}
