// trace.bt

// è¿½è¹¤ç¬¬ä¸€å€‹æ–¹æ³•ï¼šAdd
uprobe:../myapp:"main.Calculate"
{
    printf("ğŸ‘‰ [Calculate] è¢«å‘¼å«äº†ï¼ a=%d, b=%d\n", reg("ax"), reg("bx"));
}

// è¿½è¹¤ç¬¬äºŒå€‹æ–¹æ³•ï¼šMultiply
uprobe:../myapp:"main.Multiply"
{
    printf("âš¡ [Multiply] è¢«å‘¼å«äº†ï¼ x=%d, y=%d\n", reg("ax"), reg("bx"));
}

// ç•¶ Multiply åŸ·è¡ŒçµæŸä¸¦å›å‚³æ™‚è§¸ç™¼
uretprobe:../myapp:"main.Multiply"
{
    // é€™è£¡çš„ retval å°±æ˜¯ Multiply çš„çµæœï¼Œä¹Ÿå°±æ˜¯ä½ ç¨‹å¼ç¢¼ä¸­çš„ c
    printf("ğŸ¯ æŠ“åˆ° c äº†ï¼ c = %d\n", retval);
}

// å¯é¸ï¼šåŠ ä¸Šç¨‹å¼å•Ÿå‹•å’ŒçµæŸçš„æç¤º
BEGIN
{
    printf("ğŸš€ é–‹å§‹è¿½è¹¤å¤šå€‹ Go æ–¹æ³•... æŒ‰ Ctrl+C çµæŸã€‚\n");
}